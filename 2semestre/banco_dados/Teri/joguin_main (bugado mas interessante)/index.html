<!DOCTYPE html>
<html>
<head>
    <title>Simple Atari Game</title>
</head>
<body>
    <h1>Simple Atari Game</h1>
    <canvas id="gameCanvas" width="480" height="320"></canvas>
    <div id="score">Score: 0</div>
    <div id="gameOver" style="display: none;">
        <p>Game Over! Enter your name to save your score:</p>
        <input type="text" id="playerName" placeholder="Your Name">
        <button id="saveScore">Save Score</button>
        <button id="playAgain">Play Again</button>
    </div>

    <h2>Top 10 Players</h2>
    <ul id="topPlayers">
        <!-- Scores will be updated dynamically here using SSE -->
    </ul>

    <!-- Add Start Game Button -->
    <button id="startButton">Start Game</button>

    <!-- Load Scoreboard Updates using Server-Sent Events (SSE) -->
    <script>
        var topPlayersElement = document.getElementById("topPlayers");
        var eventSource = new EventSource("scoreboard_updates.php");

        eventSource.addEventListener("update", function(event) {
            var topPlayers = JSON.parse(event.data);
            topPlayersElement.innerHTML = "";

            topPlayers.forEach(function(player) {
                var listItem = document.createElement("li");
                listItem.textContent = player.nome + " - " + player.pontuacao;
                topPlayersElement.appendChild(listItem);
            });
        });
    </script>

    <script src="game.js"></script>
</body>
</html>
